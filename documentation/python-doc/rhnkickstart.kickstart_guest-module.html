<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>rhnkickstart.kickstart_guest</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="rhnkickstart-module.html">Package&nbsp;rhnkickstart</a> ::
        Module&nbsp;kickstart_guest
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="rhnkickstart.kickstart_guest-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module kickstart_guest</h1><p class="nomargin-top"><span class="codelink"><a href="rhnkickstart.kickstart_guest-pysrc.html">source&nbsp;code</a></span></p>
<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="initiate_guest"></a><span class="summary-sig-name">initiate_guest</span>(<span class="summary-sig-arg">name</span>,
        <span class="summary-sig-arg">mem_kb</span>,
        <span class="summary-sig-arg">vcpus</span>,
        <span class="summary-sig-arg">disk_gb</span>,
        <span class="summary-sig-arg">extra_append</span>,
        <span class="summary-sig-arg">log_notify_handler</span>=<span class="summary-sig-default">None</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="rhnkickstart.kickstart_guest-pysrc.html#initiate_guest">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_determine_disk_image_type"></a><span class="summary-sig-name">_determine_disk_image_type</span>(<span class="summary-sig-arg">disk_image_path</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="rhnkickstart.kickstart_guest-pysrc.html#_determine_disk_image_type">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_generate_uuid"></a><span class="summary-sig-name">_generate_uuid</span>()</span><br />
      Generate a random UUID and return it.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="rhnkickstart.kickstart_guest-pysrc.html#_generate_uuid">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_generate_mac_address"></a><span class="summary-sig-name">_generate_mac_address</span>()</span><br />
      Generate a random MAC address and return it.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="rhnkickstart.kickstart_guest-pysrc.html#_generate_mac_address">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="rhnkickstart.kickstart_guest-module.html#_create_disk_image" class="summary-sig-name" onclick="show_private();">_create_disk_image</a>(<span class="summary-sig-arg">guest_name</span>,
        <span class="summary-sig-arg">img_size_gb</span>,
        <span class="summary-sig-arg">base_dir</span>=<span class="summary-sig-default">XEN_DISK_IMAGE_DIR</span>)</span><br />
      Create a disk image for the guest.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="rhnkickstart.kickstart_guest-pysrc.html#_create_disk_image">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_connect_to_hypervisor"></a><span class="summary-sig-name">_connect_to_hypervisor</span>()</span><br />
      Connects to the hypervisor.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="rhnkickstart.kickstart_guest-pysrc.html#_connect_to_hypervisor">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_begin_domain_installation"></a><span class="summary-sig-name">_begin_domain_installation</span>(<span class="summary-sig-arg">connection</span>,
        <span class="summary-sig-arg">name</span>,
        <span class="summary-sig-arg">install_kernel_path</span>,
        <span class="summary-sig-arg">install_initrd_path</span>,
        <span class="summary-sig-arg">extra_append</span>,
        <span class="summary-sig-arg">mem_kb</span>,
        <span class="summary-sig-arg">vcpus</span>,
        <span class="summary-sig-arg">uuid</span>,
        <span class="summary-sig-arg">disk_image_path</span>,
        <span class="summary-sig-arg">disk_image_type</span>,
        <span class="summary-sig-arg">mac</span>)</span><br />
      Creates and begins installation of the Xen instance.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="rhnkickstart.kickstart_guest-pysrc.html#_begin_domain_installation">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="rhnkickstart.kickstart_guest-module.html#_wait_for_domain_installation_completion" class="summary-sig-name" onclick="show_private();">_wait_for_domain_installation_completion</a>(<span class="summary-sig-arg">conn</span>,
        <span class="summary-sig-arg">domain</span>)</span><br />
      Montor the list of running domain IDs.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="rhnkickstart.kickstart_guest-pysrc.html#_wait_for_domain_installation_completion">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="rhnkickstart.kickstart_guest-module.html#_check_guest_mbr" class="summary-sig-name" onclick="show_private();">_check_guest_mbr</a>(<span class="summary-sig-arg">diskPath</span>)</span><br />
      A crude test for guest provisioning success, but it's the best we 
      have right now.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="rhnkickstart.kickstart_guest-pysrc.html#_check_guest_mbr">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_create_boot_config_file"></a><span class="summary-sig-name">_create_boot_config_file</span>(<span class="summary-sig-arg">name</span>,
        <span class="summary-sig-arg">mem_kb</span>,
        <span class="summary-sig-arg">vcpus</span>,
        <span class="summary-sig-arg">uuid</span>,
        <span class="summary-sig-arg">disk_image_path</span>,
        <span class="summary-sig-arg">disk_image_type</span>,
        <span class="summary-sig-arg">mac</span>)</span><br />
      Writes reboot-specific XML out to a config file in our directory.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="rhnkickstart.kickstart_guest-pysrc.html#_create_boot_config_file">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_boot_domain"></a><span class="summary-sig-name">_boot_domain</span>(<span class="summary-sig-arg">uuid</span>)</span><br />
      Boots the domain for the first time after installation is complete.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="rhnkickstart.kickstart_guest-pysrc.html#_boot_domain">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="syslog_listener"></a><span class="summary-sig-name">syslog_listener</span>(<span class="summary-sig-arg">host</span>,
        <span class="summary-sig-arg">port</span>,
        <span class="summary-sig-arg">log_notify_handler</span>)</span><br />
      syslog listener to grab the anaconda output</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="rhnkickstart.kickstart_guest-pysrc.html#syslog_listener">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Variables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="DEBUG"></a><span class="summary-name">DEBUG</span> = <code title="0">0</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="DEBUG_MAC_ADDRESS"></a><span class="summary-name">DEBUG_MAC_ADDRESS</span> = <code title="&quot;73:57:73:57:73:57&quot;">&quot;73:57:73:57:73:57&quot;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="SYSLOG_PORT"></a><span class="summary-name">SYSLOG_PORT</span> = <code title="&quot;22429&quot;">&quot;22429&quot;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="XEN_INSTALL_IMAGE_DIR"></a><span class="summary-name">XEN_INSTALL_IMAGE_DIR</span> = <code title="&quot;/var/lib/xen&quot;">&quot;/var/lib/xen&quot;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="XEN_RUN_IMAGE_DIR"></a><span class="summary-name">XEN_RUN_IMAGE_DIR</span> = <code title="&quot;/var/lib/xen&quot;">&quot;/var/lib/xen&quot;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="XEN_DISK_IMAGE_DIR"></a><span class="summary-name">XEN_DISK_IMAGE_DIR</span> = <code title="&quot;/var/lib/xen/images&quot;">&quot;/var/lib/xen/images&quot;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="GUEST_KS_CHECK_INTERVAL"></a><span class="summary-name">GUEST_KS_CHECK_INTERVAL</span> = <code title="10">10</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="rhnkickstart.kickstart_guest-module.html#XEN_CREATE_TEMPLATE" class="summary-name">XEN_CREATE_TEMPLATE</a> = <code title="&quot;&quot;&quot;
    &lt;domain type='xen'&gt;
        &lt;name&gt;%(name)s&lt;/name&gt;
        &lt;os&gt;
            &lt;type&gt;linux&lt;/type&gt;
            &lt;kernel&gt;%(install_kernel)s&lt;/kernel&gt;
            &lt;initrd&gt;%(install_initrd)s&lt;/initrd&gt;
            &lt;root&gt;/dev/xvd&lt;/root&gt;
..."><code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="_create_disk_image"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_create_disk_image</span>(<span class="sig-arg">guest_name</span>,
        <span class="sig-arg">img_size_gb</span>,
        <span class="sig-arg">base_dir</span>=<span class="sig-default">XEN_DISK_IMAGE_DIR</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="rhnkickstart.kickstart_guest-pysrc.html#_create_disk_image">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Create a disk image for the guest.  The path to the newly-constructed 
  image file is returned.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="_wait_for_domain_installation_completion"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_wait_for_domain_installation_completion</span>(<span class="sig-arg">conn</span>,
        <span class="sig-arg">domain</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="rhnkickstart.kickstart_guest-pysrc.html#_wait_for_domain_installation_completion">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Montor the list of running domain IDs. First we wait for the domain ID
  to appear in the list of running domains. At this time we assume the 
  guest kickstart is underway.</p>
  <p>Next we monitor that list of running domain IDs until the one we're 
  interested in is no longer present. At this time we assume the guest 
  kickstart has terminated successfully.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="_check_guest_mbr"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_check_guest_mbr</span>(<span class="sig-arg">diskPath</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="rhnkickstart.kickstart_guest-pysrc.html#_check_guest_mbr">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>A crude test for guest provisioning success, but it's the best we have
  right now.</p>
  <p>Checks the guests disk path for a master boot record that would seem 
  to indicate success.</p>
  <p>This code was taken from the python-virtinst package in 
  /usr/sbin/virt-install.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== VARIABLES DETAILS ==================== -->
<a name="section-VariablesDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-VariablesDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="XEN_CREATE_TEMPLATE"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">XEN_CREATE_TEMPLATE</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
&quot;&quot;&quot;
    &lt;domain type='xen'&gt;
        &lt;name&gt;%(name)s&lt;/name&gt;
        &lt;os&gt;
            &lt;type&gt;linux&lt;/type&gt;
            &lt;kernel&gt;%(install_kernel)s&lt;/kernel&gt;
            &lt;initrd&gt;%(install_initrd)s&lt;/initrd&gt;
            &lt;root&gt;/dev/xvd&lt;/root&gt;
<code class="variable-ellipsis">...</code>
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Fri Nov 25 11:30:08 2016
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
