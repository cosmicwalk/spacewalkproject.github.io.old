<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>backend.server.rhnServer.server_token</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="backend-module.html">Package&nbsp;backend</a> ::
        <a href="backend.server-module.html">Package&nbsp;server</a> ::
        <a href="backend.server.rhnServer-module.html">Package&nbsp;rhnServer</a> ::
        Module&nbsp;server_token
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="backend.server.rhnServer.server_token-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module server_token</h1><p class="nomargin-top"><span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html">source&nbsp;code</a></span></p>
<!-- ==================== CLASSES ==================== -->
<a name="section-Classes"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Classes</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Classes"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.rhnServer.server_token.ActivationTokens-class.html" class="summary-name">ActivationTokens</a><br />
      An aggregation of activation tokens, exposing important information
        like org_id, user_id etc in a unified manner.
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.rhnServer.server_token.ReRegistrationToken-class.html" class="summary-name">ReRegistrationToken</a><br />
      Subclass for re-registration keys.
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.rhnServer.server_token.ReRegistrationActivationToken-class.html" class="summary-name">ReRegistrationActivationToken</a><br />
      Subclass for re-registration keys and activation keys used together.
    </td>
  </tr>
</table>
<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="token_channels"></a><span class="summary-sig-name">token_channels</span>(<span class="summary-sig-arg">server</span>,
        <span class="summary-sig-arg">server_arch</span>,
        <span class="summary-sig-arg">tokens_obj</span>)</span><br />
      Handle channel subscriptions for the registration token</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#token_channels">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="token_server_groups"></a><span class="summary-sig-name">token_server_groups</span>(<span class="summary-sig-arg">server_id</span>,
        <span class="summary-sig-arg">tokens_obj</span>)</span><br />
      Handle server group subscriptions for the registration token</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#token_server_groups">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="token_packages"></a><span class="summary-sig-name">token_packages</span>(<span class="summary-sig-arg">server_id</span>,
        <span class="summary-sig-arg">tokens_obj</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#token_packages">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="deploy_configs_if_needed"></a><span class="summary-sig-name">deploy_configs_if_needed</span>(<span class="summary-sig-arg">server</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#deploy_configs_if_needed">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_get_token_config_channels"></a><span class="summary-sig-name">_get_token_config_channels</span>(<span class="summary-sig-arg">token_id</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#_get_token_config_channels">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_get_current_config_channels"></a><span class="summary-sig-name">_get_current_config_channels</span>(<span class="summary-sig-arg">server_id</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#_get_current_config_channels">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="token_config_channels"></a><span class="summary-sig-name">token_config_channels</span>(<span class="summary-sig-arg">server</span>,
        <span class="summary-sig-arg">tokens_obj</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#token_config_channels">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="server_used_token"></a><span class="summary-sig-name">server_used_token</span>(<span class="summary-sig-arg">server_id</span>,
        <span class="summary-sig-arg">token_id</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#server_used_token">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="check_token_limits"></a><span class="summary-sig-name">check_token_limits</span>(<span class="summary-sig-arg">server_id</span>,
        <span class="summary-sig-arg">tokens_obj</span>)</span><br />
      check the token registration limits</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#check_token_limits">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_check_token_limits"></a><span class="summary-sig-name">_check_token_limits</span>(<span class="summary-sig-arg">server_id</span>,
        <span class="summary-sig-arg">token_rec</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#_check_token_limits">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_fetch_token_from_cursor"></a><span class="summary-sig-name">_fetch_token_from_cursor</span>(<span class="summary-sig-arg">cursor</span>)</span><br />
      Fetches a token from a prepared and executed cursor Used by both 
      fetch_token and fetch_org_token</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#_fetch_token_from_cursor">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_categorize_token_entitlements"></a><span class="summary-sig-name">_categorize_token_entitlements</span>(<span class="summary-sig-arg">token_entitlements</span>,
        <span class="summary-sig-arg">entitlements_base</span>,
        <span class="summary-sig-arg">entitlements_extra</span>)</span><br />
      Given a hash token_entitlements, splits the base ones and puts them 
      in the entitlements_base hash, and the extras in entitlements_extra</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#_categorize_token_entitlements">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="backend.server.rhnServer.server_token-module.html#_validate_entitlements" class="summary-sig-name" onclick="show_private();">_validate_entitlements</a>(<span class="summary-sig-arg">token_string</span>,
        <span class="summary-sig-arg">rereg_ents</span>,
        <span class="summary-sig-arg">base_entitlements</span>,
        <span class="summary-sig-arg">extra_entitlements</span>,
        <span class="summary-sig-arg">remove_entitlements</span>)</span><br />
      Perform various checks on the final list of entitlements accumulated 
      after processing all activation keys.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#_validate_entitlements">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="fetch_token"></a><span class="summary-sig-name">fetch_token</span>(<span class="summary-sig-arg">token_string</span>)</span><br />
      Fetches a token from the database</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#fetch_token">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="fetch_org_token"></a><span class="summary-sig-name">fetch_org_token</span>(<span class="summary-sig-arg">org_id</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#fetch_org_token">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="disable_token"></a><span class="summary-sig-name">disable_token</span>(<span class="summary-sig-arg">tokens_obj</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#disable_token">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="process_token"></a><span class="summary-sig-name">process_token</span>(<span class="summary-sig-arg">server</span>,
        <span class="summary-sig-arg">server_arch</span>,
        <span class="summary-sig-arg">tokens_obj</span>,
        <span class="summary-sig-arg">virt_type</span>=<span class="summary-sig-default">None</span>)</span><br />
      perform registration tasks for a server as indicated by a token</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#process_token">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="history_report"></a><span class="summary-sig-name">history_report</span>(<span class="summary-sig-arg">history</span>)</span><br />
      build a mildly html-ized version of the history as a report</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#history_report">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="history_subreport"></a><span class="summary-sig-name">history_subreport</span>(<span class="summary-sig-arg">history</span>,
        <span class="summary-sig-arg">key</span>,
        <span class="summary-sig-arg">title</span>,
        <span class="summary-sig-arg">emptymsg</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#history_subreport">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Variables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="VIRT_ENT_LABEL"></a><span class="summary-name">VIRT_ENT_LABEL</span> = <code title="'virtualization_host'">'virtualization_host'</code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.rhnServer.server_token-module.html#_query_token_server_groups" class="summary-name" onclick="show_private();">_query_token_server_groups</a> = <code title="rhnSQL.Statement(&quot;&quot;&quot;
    select rtg.server_group_id, sg.name
      from rhnRegTokenGroups rtg, rhnServerGroup sg
     where rtg.token_id = :token_id
       and sg.id = rtg.server_group_id
&quot;&quot;&quot;)">rhnSQL.Statement(<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.rhnServer.server_token-module.html#_query_token_packages" class="summary-name" onclick="show_private();">_query_token_packages</a> = <code title="rhnSQL.Statement(&quot;&quot;&quot;
    select pn.id as name_id, pa.id as arch_id, pn.name
    from rhnPackageName pn, rhnRegTokenPackages rtp
        left outer join rhnPackageArch pa on rtp.arch_id = pa.id
    where rtp.token_id = :token_id
        and rtp.name_id = pn.id
    order by upper(pn.name)
&quot;&quot;&quot;)">rhnSQL.Statement(<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.rhnServer.server_token-module.html#_query_token_packages_insert" class="summary-name" onclick="show_private();">_query_token_packages_insert</a> = <code title="rhnSQL.Statement(&quot;&quot;&quot;
    insert into rhnActionPackage (id, action_id, name_id, parameter)
    values (sequence_nextval('rhn_act_p_id_seq'), :action_id, :name_id\
, 'upgrade')
&quot;&quot;&quot;)">rhnSQL.Statement(<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.rhnServer.server_token-module.html#_query_token_latest_revisions" class="summary-name" onclick="show_private();">_query_token_latest_revisions</a> = <code title="rhnSQL.Statement(&quot;&quot;&quot;
    select cf.latest_config_revision_id revision_id,
           cfn.path
      from rhnConfigFileName cfn,
           rhnConfigFile cf,
           rhnConfigChannelType cct,
           rhnConfigChannel cc,
           rhnServerConfigChannel scc
...">rhnSQL.Statement(<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.rhnServer.server_token-module.html#_query_add_revision_to_action" class="summary-name" onclick="show_private();">_query_add_revision_to_action</a> = <code title="rhnSQL.Statement(&quot;&quot;&quot;
    insert into rhnActionConfigRevision (id, action_id, server_id, con\
fig_revision_id)
    values (sequence_nextval('rhn_actioncr_id_seq'), :action_id, :serv\
er_id, :config_revision_id)
&quot;&quot;&quot;)">rhnSQL.Statement(<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.rhnServer.server_token-module.html#_query_token_config_channels" class="summary-name" onclick="show_private();">_query_token_config_channels</a> = <code title="rhnSQL.Statement(&quot;&quot;&quot;
    select rtcc.config_channel_id,
           rtcc.position, cc.name
      from rhnConfigChannel cc,
           rhnRegTokenConfigChannels rtcc
     where rtcc.token_id = :token_id
       and rtcc.config_channel_id = cc.id
    order by rtcc.position
...">rhnSQL.Statement(<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.rhnServer.server_token-module.html#_query_set_server_config_channels" class="summary-name" onclick="show_private();">_query_set_server_config_channels</a> = <code title="rhnSQL.Statement(&quot;&quot;&quot;
    insert into rhnServerConfigChannel (server_id, config_channel_id, \
position)
    values (:server_id, :config_channel_id, :position)
&quot;&quot;&quot;)">rhnSQL.Statement(<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.rhnServer.server_token-module.html#_query_current_config_channels" class="summary-name" onclick="show_private();">_query_current_config_channels</a> = <code title="rhnSQL.Statement(&quot;&quot;&quot;
    select config_channel_id
      from rhnServerConfigChannel
       where server_id = :server_id
           and position is not null
&quot;&quot;&quot;)">rhnSQL.Statement(<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.rhnServer.server_token-module.html#_query_server_token_used" class="summary-name" onclick="show_private();">_query_server_token_used</a> = <code title="rhnSQL.Statement(&quot;&quot;&quot;
    insert into rhnServerTokenRegs (server_id, token_id)
    values (:server_id, :token_id)
&quot;&quot;&quot;)">rhnSQL.Statement(<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.rhnServer.server_token-module.html#_query_check_server_uses_token" class="summary-name" onclick="show_private();">_query_check_server_uses_token</a> = <code title="rhnSQL.Statement(&quot;&quot;&quot;
    select 1 from rhnServerTokenRegs
    where server_id = :server_id
    and token_id = :token_id
&quot;&quot;&quot;)">rhnSQL.Statement(<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.rhnServer.server_token-module.html#_query_check_token_limits" class="summary-name" onclick="show_private();">_query_check_token_limits</a> = <code title="rhnSQL.Statement(&quot;&quot;&quot;
    select
       rt.usage_limit max_nr,
       ( select count(server_id) from rhnServerTokenRegs
         where token_id = :token_id ) curr_nr
    from rhnRegToken rt
    where rt.id = :token_id
&quot;&quot;&quot;)">rhnSQL.Statement(<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.rhnServer.server_token-module.html#_query_token" class="summary-name" onclick="show_private();">_query_token</a> = <code title="rhnSQL.Statement(&quot;&quot;&quot;
    select rt.id as token_id,
           sgt.label as token_type,
           sgt.name as token_desc,
           sgt.is_base,
           ak.token,
           rt.user_id,
           rt.org_id,
...">rhnSQL.Statement(<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.rhnServer.server_token-module.html#_query_org_default_token" class="summary-name" onclick="show_private();">_query_org_default_token</a> = <code title="rhnSQL.Statement(&quot;&quot;&quot;
    select rt.id as token_id,
           sgt.label as token_type,
           sgt.name as token_desc,
           sgt.is_base,
           ak.token,
           rt.user_id,
           rt.org_id,
...">rhnSQL.Statement(<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.rhnServer.server_token-module.html#_query_disable_token" class="summary-name" onclick="show_private();">_query_disable_token</a> = <code title="rhnSQL.Statement(&quot;&quot;&quot;
    update rhnRegToken
       set disabled = 1
     where id = :token_id
&quot;&quot;&quot;)">rhnSQL.Statement(<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="_validate_entitlements"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_validate_entitlements</span>(<span class="sig-arg">token_string</span>,
        <span class="sig-arg">rereg_ents</span>,
        <span class="sig-arg">base_entitlements</span>,
        <span class="sig-arg">extra_entitlements</span>,
        <span class="sig-arg">remove_entitlements</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="backend.server.rhnServer.server_token-pysrc.html#_validate_entitlements">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Perform various checks on the final list of entitlements accumulated 
  after processing all activation keys.</p>
  <p>rereg_ents passed in as a list of entitlement labels.</p>
  <p>Extra/base entitlements passed in as a hash of tuples ('label', 
  'Friendly Name') mapping to None. (i.e. seems to be used as just a 
  set)</p>
  <p>Remove entitlements being maintained as just a list of labels.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== VARIABLES DETAILS ==================== -->
<a name="section-VariablesDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-VariablesDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="_query_token_server_groups"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_query_token_server_groups</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
rhnSQL.Statement(&quot;&quot;&quot;
    select rtg.server_group_id, sg.name
      from rhnRegTokenGroups rtg, rhnServerGroup sg
     where rtg.token_id = :token_id
       and sg.id = rtg.server_group_id
&quot;&quot;&quot;)
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="_query_token_packages"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_query_token_packages</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
rhnSQL.Statement(&quot;&quot;&quot;
    select pn.id as name_id, pa.id as arch_id, pn.name
    from rhnPackageName pn, rhnRegTokenPackages rtp
        left outer join rhnPackageArch pa on rtp.arch_id = pa.id
    where rtp.token_id = :token_id
        and rtp.name_id = pn.id
    order by upper(pn.name)
&quot;&quot;&quot;)
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="_query_token_packages_insert"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_query_token_packages_insert</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
rhnSQL.Statement(&quot;&quot;&quot;
    insert into rhnActionPackage (id, action_id, name_id, parameter)
    values (sequence_nextval('rhn_act_p_id_seq'), :action_id, :name_id<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
, 'upgrade')
&quot;&quot;&quot;)
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="_query_token_latest_revisions"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_query_token_latest_revisions</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
rhnSQL.Statement(&quot;&quot;&quot;
    select cf.latest_config_revision_id revision_id,
           cfn.path
      from rhnConfigFileName cfn,
           rhnConfigFile cf,
           rhnConfigChannelType cct,
           rhnConfigChannel cc,
           rhnServerConfigChannel scc
<code class="variable-ellipsis">...</code>
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="_query_add_revision_to_action"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_query_add_revision_to_action</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
rhnSQL.Statement(&quot;&quot;&quot;
    insert into rhnActionConfigRevision (id, action_id, server_id, con<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
fig_revision_id)
    values (sequence_nextval('rhn_actioncr_id_seq'), :action_id, :serv<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
er_id, :config_revision_id)
&quot;&quot;&quot;)
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="_query_token_config_channels"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_query_token_config_channels</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
rhnSQL.Statement(&quot;&quot;&quot;
    select rtcc.config_channel_id,
           rtcc.position, cc.name
      from rhnConfigChannel cc,
           rhnRegTokenConfigChannels rtcc
     where rtcc.token_id = :token_id
       and rtcc.config_channel_id = cc.id
    order by rtcc.position
<code class="variable-ellipsis">...</code>
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="_query_set_server_config_channels"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_query_set_server_config_channels</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
rhnSQL.Statement(&quot;&quot;&quot;
    insert into rhnServerConfigChannel (server_id, config_channel_id, <span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
position)
    values (:server_id, :config_channel_id, :position)
&quot;&quot;&quot;)
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="_query_current_config_channels"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_query_current_config_channels</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
rhnSQL.Statement(&quot;&quot;&quot;
    select config_channel_id
      from rhnServerConfigChannel
       where server_id = :server_id
           and position is not null
&quot;&quot;&quot;)
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="_query_server_token_used"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_query_server_token_used</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
rhnSQL.Statement(&quot;&quot;&quot;
    insert into rhnServerTokenRegs (server_id, token_id)
    values (:server_id, :token_id)
&quot;&quot;&quot;)
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="_query_check_server_uses_token"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_query_check_server_uses_token</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
rhnSQL.Statement(&quot;&quot;&quot;
    select 1 from rhnServerTokenRegs
    where server_id = :server_id
    and token_id = :token_id
&quot;&quot;&quot;)
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="_query_check_token_limits"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_query_check_token_limits</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
rhnSQL.Statement(&quot;&quot;&quot;
    select
       rt.usage_limit max_nr,
       ( select count(server_id) from rhnServerTokenRegs
         where token_id = :token_id ) curr_nr
    from rhnRegToken rt
    where rt.id = :token_id
&quot;&quot;&quot;)
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="_query_token"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_query_token</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
rhnSQL.Statement(&quot;&quot;&quot;
    select rt.id as token_id,
           sgt.label as token_type,
           sgt.name as token_desc,
           sgt.is_base,
           ak.token,
           rt.user_id,
           rt.org_id,
<code class="variable-ellipsis">...</code>
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="_query_org_default_token"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_query_org_default_token</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
rhnSQL.Statement(&quot;&quot;&quot;
    select rt.id as token_id,
           sgt.label as token_type,
           sgt.name as token_desc,
           sgt.is_base,
           ak.token,
           rt.user_id,
           rt.org_id,
<code class="variable-ellipsis">...</code>
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="_query_disable_token"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_query_disable_token</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
rhnSQL.Statement(&quot;&quot;&quot;
    update rhnRegToken
       set disabled = 1
     where id = :token_id
&quot;&quot;&quot;)
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Fri Nov 25 11:30:08 2016
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
