<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>backend.server.handlers.xmlrpc.queue.Queue</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        backend ::
        server ::
        handlers ::
        xmlrpc ::
        queue ::
        Queue ::
        Class&nbsp;Queue
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="backend.server.handlers.xmlrpc.queue.Queue-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class Queue</h1><p class="nomargin-top"><span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue">source&nbsp;code</a></span></p>
<center>
<center>  <map id="uml_class_diagram_for_backend__294" name="uml_class_diagram_for_backend__294">
<area shape="rect" id="node1_7" href="backend.server.handlers.xmlrpc.queue.Queue-class.html#__init__" title="Add a list of functions we are willing to server out." alt="" coords="18,37,451,57"/>
<area shape="rect" id="node1_8" href="backend.server.handlers.xmlrpc.queue.Queue-class.html#get_future_actions" title="return actions which are scheduled within next /time_window/ hours" alt="" coords="18,57,451,77"/>
<area shape="rect" id="node1_9" href="backend.server.handlers.xmlrpc.queue.Queue-class.html#get" title="backend.server.handlers.xmlrpc.queue.Queue.get" alt="" coords="18,77,451,97"/>
<area shape="rect" id="node1_10" href="backend.server.handlers.xmlrpc.queue.Queue-class.html#submit" title="Submit the results of a queue run." alt="" coords="18,97,451,117"/>
<area shape="rect" id="node1_11" href="backend.server.handlers.xmlrpc.queue.Queue-class.html#status_for_action_type_code" title="Convert whatever the client sends as a result code into a status in the &#160;database format This is more complicated, since some of the client&#39;s result codes have to be marked as successes." alt="" coords="18,117,451,137"/>
<area shape="rect" id="node1_12" href="backend.server.handlers.xmlrpc.queue.Queue-class.html#process_extra_data" title="backend.server.handlers.xmlrpc.queue.Queue.process_extra_data" alt="" coords="18,137,451,157"/>
<area shape="rect" id="node1_13" href="backend.server.handlers.xmlrpc.queue.Queue-class.html#length" title="Return the queue length for a certain server." alt="" coords="18,157,451,177"/>
<area shape="rect" id="node1" href="backend.server.handlers.xmlrpc.queue.Queue-class.html" title="XMLRPC queue functions that we will provide for the outside world." alt="" coords="5,5,463,184"/>
</map>
  <img src="uml_class_diagram_for_backend__294.png" alt='' usemap="#uml_class_diagram_for_backend__294" ismap="ismap" class="graph-without-title" />
</center>
</center>
<hr />
<p>XMLRPC queue functions that we will provide for the outside world.</p>

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__init__"></a><span class="summary-sig-name">__init__</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Add a list of functions we are willing to server out.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue.__init__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__getV1"></a><span class="summary-sig-name">__getV1</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">action</span>)</span><br />
      Fetches old queued actions for the client version 1.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue.__getV1">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__getV2"></a><span class="summary-sig-name">__getV2</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">action</span>,
        <span class="summary-sig-arg">dry_run</span>=<span class="summary-sig-default">0</span>)</span><br />
      Fetches queued actions for the clients version 2+.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue.__getV2">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="backend.server.handlers.xmlrpc.queue.Queue-class.html#__update_status" class="summary-sig-name" onclick="show_private();">__update_status</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">status</span>)</span><br />
      Update the runnng kernel and the last boot values for this
server from the status dictionary passed on queue checkin.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue.__update_status">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__set_reboot_action_to_succcess"></a><span class="summary-sig-name">__set_reboot_action_to_succcess</span>(<span class="summary-sig-arg">self</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue.__set_reboot_action_to_succcess">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__should_snapshot"></a><span class="summary-sig-name">__should_snapshot</span>(<span class="summary-sig-arg">self</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue.__should_snapshot">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_invalidate_child_actions"></a><span class="summary-sig-name">_invalidate_child_actions</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">action_id</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue._invalidate_child_actions">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_invalidate_failed_prereq_actions"></a><span class="summary-sig-name">_invalidate_failed_prereq_actions</span>(<span class="summary-sig-arg">self</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue._invalidate_failed_prereq_actions">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_future_actions_enabled"></a><span class="summary-sig-name">_future_actions_enabled</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Returns true if staging content is enabled for this system</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue._future_actions_enabled">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="get_future_actions"></a><span class="summary-sig-name">get_future_actions</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">system_id</span>,
        <span class="summary-sig-arg">time_window</span>)</span><br />
      return actions which are scheduled within next /time_window/ hours</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue.get_future_actions">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="get"></a><span class="summary-sig-name">get</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">system_id</span>,
        <span class="summary-sig-arg">version</span>=<span class="summary-sig-default">1</span>,
        <span class="summary-sig-arg">status</span>=<span class="summary-sig-default">{}</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue.get">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="backend.server.handlers.xmlrpc.queue.Queue-class.html#submit" class="summary-sig-name">submit</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">system_id</span>,
        <span class="summary-sig-arg">action_id</span>,
        <span class="summary-sig-arg">result</span>,
        <span class="summary-sig-arg">message</span>=<span class="summary-sig-default">&quot;&quot;</span>,
        <span class="summary-sig-arg">data</span>=<span class="summary-sig-default">{}</span>)</span><br />
      Submit the results of a queue run.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue.submit">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="status_for_action_type_code"></a><span class="summary-sig-name">status_for_action_type_code</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">action_type</span>,
        <span class="summary-sig-arg">rcode</span>)</span><br />
      Convert whatever the client sends as a result code into a status in 
      the database format This is more complicated, since some of the 
      client's result codes have to be marked as successes.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue.status_for_action_type_code">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="process_extra_data"></a><span class="summary-sig-name">process_extra_data</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">server_id</span>,
        <span class="summary-sig-arg">action_id</span>,
        <span class="summary-sig-arg">data</span>=<span class="summary-sig-default">{}</span>,
        <span class="summary-sig-arg">action_type</span>=<span class="summary-sig-default">None</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue.process_extra_data">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="length"></a><span class="summary-sig-name">length</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">system_id</span>)</span><br />
      Return the queue length for a certain server.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue.length">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__reboot_in_progress"></a><span class="summary-sig-name">__reboot_in_progress</span>(<span class="summary-sig-arg">self</span>)</span><br />
      check for a reboot action for this server in status Picked Up</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue.__reboot_in_progress">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__update_action"></a><span class="summary-sig-name">__update_action</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">action_id</span>,
        <span class="summary-sig-arg">status</span>,
        <span class="summary-sig-arg">resultCode</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">message</span>=<span class="summary-sig-default">&quot;&quot;</span>)</span><br />
      Update the status of an action.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue.__update_action">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__errataUpdate"></a><span class="summary-sig-name">__errataUpdate</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">actionId</span>)</span><br />
      Old client errata retrieval.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue.__errataUpdate">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__packageUpdate"></a><span class="summary-sig-name">__packageUpdate</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">actionId</span>)</span><br />
      Old client package retrieval.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue.__packageUpdate">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== CLASS VARIABLES ==================== -->
<a name="section-ClassVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.handlers.xmlrpc.queue.Queue-class.html#_query_future_enabled" class="summary-name" onclick="show_private();">_query_future_enabled</a> = <code title="rhnSQL.Statement(&quot;&quot;&quot;
        select staging_content_enabled
          from rhnOrgConfiguration oc,
               rhnServer s
         where s.org_id = oc.org_id
           and s.id = :server_id
    &quot;&quot;&quot;)">rhnSQL.Statement(<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.handlers.xmlrpc.queue.Queue-class.html#_query_queue_future" class="summary-name" onclick="show_private();">_query_queue_future</a> = <code title="rhnSQL.Statement(&quot;&quot;&quot;
                    select sa.action_id id, a.version,
                           sa.remaining_tries, at.label method,
                           at.unlocked_only,
                           a.prerequisite
                      from rhnServerAction sa,
                           rhnAction a,
                           rhnActionType at
...">rhnSQL.Statement(<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="backend.server.handlers.xmlrpc.queue.Queue-class.html#_query_queue_get" class="summary-name" onclick="show_private();">_query_queue_get</a> = <code title="rhnSQL.Statement(&quot;&quot;&quot;
                    select sa.action_id id, a.version,
                           sa.remaining_tries, at.label method,
                           at.unlocked_only,
                           a.prerequisite
                      from rhnServerAction sa,
                           rhnAction a,
                           rhnActionType at
...">rhnSQL.Statement(<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__update_status"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__update_status</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">status</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue.__update_status">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Update the runnng kernel and the last boot values for this
server from the status dictionary passed on queue checkin.

Record last running kernel and uptime.  Only update
last_boot if it has changed by more than five seconds. We
don't know the timezone the server is in. or even if its
clock is right, but we do know it can properly track seconds
 since it rebooted, and use our own clocks to keep proper
track of the actual time.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="submit"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">submit</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">system_id</span>,
        <span class="sig-arg">action_id</span>,
        <span class="sig-arg">result</span>,
        <span class="sig-arg">message</span>=<span class="sig-default">&quot;&quot;</span>,
        <span class="sig-arg">data</span>=<span class="sig-default">{}</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="backend.server.handlers.xmlrpc.queue-pysrc.html#Queue.submit">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Submit the results of a queue run.
Maps old and new rhn_check behavior to new database status codes

The new API uses 4 slightly different status codes than the
old client does.  This function will &quot;hopefully&quot; sensibly
map them.  Old methodology:
   -rhn_check retrieves an action from the top of the action queue.
   -It attempts to execute the desired action and returns either
       (a) 0   -- presumed successful.
       (b) rhnFault object -- presumed failed
       (c) some other non-fault object -- *assumed* successful.
   -Regardless of result code, action is marked as &quot;executed&quot;

We try to make a smarter status selection (i.e. failed||completed).

For reference:
New DB status codes:      Old DB status codes:
      0: Queued               0: queued
      1: Picked Up            1: picked up
      2: Completed            2: executed
      3: Failed               3: completed

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== CLASS VARIABLE DETAILS ==================== -->
<a name="section-ClassVariableDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variable Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariableDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="_query_future_enabled"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_query_future_enabled</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
rhnSQL.Statement(&quot;&quot;&quot;
        select staging_content_enabled
          from rhnOrgConfiguration oc,
               rhnServer s
         where s.org_id = oc.org_id
           and s.id = :server_id
    &quot;&quot;&quot;)
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="_query_queue_future"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_query_queue_future</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
rhnSQL.Statement(&quot;&quot;&quot;
                    select sa.action_id id, a.version,
                           sa.remaining_tries, at.label method,
                           at.unlocked_only,
                           a.prerequisite
                      from rhnServerAction sa,
                           rhnAction a,
                           rhnActionType at
<code class="variable-ellipsis">...</code>
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="_query_queue_get"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_query_queue_get</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
rhnSQL.Statement(&quot;&quot;&quot;
                    select sa.action_id id, a.version,
                           sa.remaining_tries, at.label method,
                           at.unlocked_only,
                           a.prerequisite
                      from rhnServerAction sa,
                           rhnAction a,
                           rhnActionType at
<code class="variable-ellipsis">...</code>
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Fri Nov 25 11:30:19 2016
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
